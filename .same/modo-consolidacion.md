# 🔒 MODO CONSOLIDACIÓN - CUSTODIA360

**Estado**: ✅ ACTIVO
**Fecha activación**: 13 Octubre 2025
**Sesión**: Continuación desde contexto previo
**Última confirmación**: 16 Octubre 2025 - Modo CONFIRMADO Y REACTIVADO explícitamente
**Sesión continuación**: 16 Octubre 2025 - MODO REACTIVADO en nueva sesión
**Nueva confirmación**: 16 Octubre 2025 - MODO CONSOLIDACIÓN REFORZADO con reglas estrictas
**Protección**: MÁXIMA - Sin refactorizaciones automáticas
**Confirmación usuario**: ✅ Solicitado explícitamente en sesión de continuación
**Estado actual**: 🔒 ACTIVO - Protección total del código base

---

## 📋 BASE PROTEGIDA

Todo el código, estructura y configuraciones actuales están **PROTEGIDAS** y no pueden modificarse sin autorización explícita del usuario.

### Componentes protegidos:
- ✅ Paneles de usuario (delegado principal, suplente, formación)
- ✅ APIs y endpoints
- ✅ Componentes React/Next.js
- ✅ Tablas de Supabase (schema.sql, configuracion-sistema-schema.sql)
- ✅ Integraciones (Resend, Stripe, BOE, etc.)
- ✅ Estilos y configuraciones
- ✅ Dependencias del proyecto
- ✅ Sistema de autenticación y sesiones
- ✅ Modales y formularios existentes

---

## 🚫 REGLAS ESTRICTAS

### NO PERMITIDO (sin autorización):
- ❌ Modificar archivos existentes
- ❌ Eliminar código o componentes
- ❌ Refactorizar código
- ❌ Optimizar automáticamente
- ❌ Cambiar dependencias
- ❌ Modificar UX/UI existente
- ❌ Reescribir funciones
- ❌ Cambiar estructura de datos

### SÍ PERMITIDO:
- ✅ Leer código para análisis
- ✅ Crear NUEVOS archivos (con permiso)
- ✅ Añadir NUEVAS funcionalidades (con permiso)
- ✅ Responder preguntas
- ✅ Sugerir (sin implementar)

---

## ⚠️ PROTOCOLO DE CAMBIOS

Antes de aplicar CUALQUIER cambio, SIEMPRE preguntar:

> **"¿Deseas aplicar este cambio sobre la base protegida?"**

Solo proceder si la respuesta es afirmativa.

---

## 📝 ESTADO ACTUAL DEL PROYECTO

### Archivos principales revisados:
- `custodia-360/src/app/dashboard-delegado/page.tsx` - Dashboard principal ✅
- `custodia-360/database/schema.sql` - Schema de base de datos ✅
- `custodia-360/database/configuracion-sistema-schema.sql` - Configuración sistema ✅

### Últimas modificaciones (antes del modo consolidación):
- Añadido "Canal de Comunicación" widget
- Creado modal "Mapa de Riesgos"
- Creado modal "Comunicación"
- Eliminados iconos según solicitud
- Reorganización de secciones del dashboard
- Añadidos títulos de sección

---

## 🔓 DESACTIVACIÓN

Para desactivar este modo, el usuario debe decir:
> "Desactiva el modo consolidación"

---

## ⚠️ RECORDATORIO IMPORTANTE

Este modo solo está activo en esta sesión actual. Si se inicia una nueva conversación, este contexto se perderá y deberá reactivarse manualmente.

---

**Última actualización**: 16 Oct 2025 - Modo CONFIRMADO por usuario

---

## ✅ CONFIRMACIÓN ACTUAL (16 Oct 2025 - REFORZADO)

El usuario ha solicitado explícitamente las siguientes reglas ESTRICTAS:

### ✅ PERMITIDO:
1. ✅ Leer código para análisis e integraciones
2. ✅ Añadir o modificar archivos, funciones o tablas SOLO si el usuario lo indica explícitamente
3. ✅ Responder preguntas sobre el código
4. ✅ Sugerir mejoras (sin implementar)

### 🚫 PROHIBIDO (sin autorización explícita):
1. 🚫 Tocar, eliminar, reescribir o optimizar código existente por iniciativa propia
2. 🚫 Modificar dependencias, rutas, estilos o componentes existentes
3. 🚫 Reemplazar endpoints, APIs o automatizaciones que ya existen
4. 🚫 Refactorizar código automáticamente
5. 🚫 Aplicar "automeloras" de UX/UI sin solicitud expresa

### 📋 BASE PROTEGIDA:
- ✅ Todos los paneles (delegado principal, suplente, formación)
- ✅ Todas las APIs y endpoints
- ✅ Todos los componentes React/Next.js
- ✅ Todas las tablas de Supabase (schema.sql, configuracion-sistema-schema.sql)
- ✅ Todas las integraciones (Resend, Stripe, BOE)
- ✅ Todos los estilos y configuraciones
- ✅ Todas las dependencias del proyecto
- ✅ Sistema de autenticación y sesiones
- ✅ Modales, formularios y flujos existentes
- ✅ Sistema de test LOPIVI y formación
- ✅ Páginas de bienvenida, configuración y certificación

### ⚠️ PROTOCOLO DE CAMBIOS:
Antes de aplicar CUALQUIER cambio, SIEMPRE preguntar:
> **"¿Deseas aplicar este cambio sobre la base protegida?"**

Solo proceder si la respuesta es afirmativa.

### 🔓 DESACTIVACIÓN:
Para desactivar este modo, el usuario debe decir:
> "Desactiva el modo consolidación"

**Estado**: 🔒 MODO CONSOLIDACIÓN ACTIVO, CONFIRMADO Y REFORZADO

**Política Global**: Esta política se mantiene activa durante todo el desarrollo del proyecto Custodia360, incluso si cambia de chat o supera el límite de mensajes.
